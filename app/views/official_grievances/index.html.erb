<div class="card aos-init aos-animate" data-aos="fade-up" data-aos-delay="800">
  <div class="card-header">
    <h4 class="card-title">Grievances</h4>
  </div>
  <div class="card-body">
    <%= form_with url: official_grievances_path, method: :get do |form| %>
      <div class="form-group my-2">
        <%= form.label :area, "Area", class: "form-label" %>
        <%= form.select :area, ["Sector 1", "Sector 2", "Sector 3", "Sector 4", "Sector 5"], {}, { class: "form-select" } %>
        <div class="d-flex justify-content-center mt-2">
          <%= form.submit "Search", class: "btn btn-primary" %>
        </div>
      </div>
    <% end %>
    <% if @grievances.length > 0 %>
      <table class="table table-striped table-hover table responsive">
       <thead>
        <tr>
          <th scope="col">Date</th>
          <th scope="col">Problem</th>
          <th scope="col">Connection</th>
          <th scope="col">Updated</th>
          <th scope="col">Status</th>
        </tr>
        </thead>
        <% @grievances.each do |grievance| %>
          <tr onclick="location.href='<%= (grievance.status != "Resolved" and grievance.connection.area == Current.official.area) ? official_grievance_edit_path(grievance.id) : official_grievance_path(grievance.id) %>';" onmouseover="this.style.cursor='pointer';">
            <td><%= grievance.created_at.strftime("%b %d, %Y") %></td>
            <td><%= grievance.problem %></td>
            <td><%= grievance.connection.name %></td>
            <td><%= grievance.updated_at.strftime("%b %d, %Y") %></td>
            <td><%= grievance.status %></td>
          </tr>
        <% end %>
      </div>
    <% else %>
      <diV class="my-4 d-flex align-items-center justify-content-center">
        <h5 class="text-muted text-center">Wow, no complaints so far!</h5>
      </div>
    <% end %>
  </div>
</div>